<template name="mm_media">
  {{#contentFor "headerTitle"}}
    <h1 class="title" data-snap-ignore="true">Edit Media</h1>
  {{/contentFor}}

  {{> contentFor region="headerButtonLeft" template='_userMediaBackHeaderButton'}}

  {{> contentFor region="headerButtonRight" template='_userMediaAddHeaderButton'}}


  {{#ionView}}
    {{#ionContent}}
      <div class="userMediaWrapper" data-snap-ignore="true">
      {{#if media}}
        {{#each media}}
          {{> _mediaRow}}
        {{/each}}
      {{else}}
        <div class='card'>
          <div class="item item-divider">
            Media List Empty
          </div>
          <div class='item item-text-wrap'>
            Add media using the add media button at the top right to see your media here.
          </div>
        </div>
      {{/if}}
      </div>
    {{/ionContent}}
  {{/ionView}}
</template>

<template name='_userMediaAddHeaderButton'>
  <input data-snap-ignore="true" id="FileUploader" type="file" multiple/>
  <button data-snap-ignore="true" class="button button-icon media-add-button pull-right">Add</button>
</template>

<template name='_userMediaBackHeaderButton'>
  <button class='button button-icon back-button' data-snap-ignore="true" data-nav-direction="back">Back</button>
</template>

<template name="_mediaRow">
  {{#if isMobile}}
    <div class="mediaItem mediaMobileImageWrapper" defaultAction="link" href="/media/{{_id}}">
      <!--<img class="mediaMobileImage" src='{{url store="thumbs"}}' title='{{metadata.name}}'>-->
        <div class="centeredImage" title='{{metadata.name}}' mediaFull='{{url store="mediaFull"}}' style="background-image: url('{{url store="thumbs"}}')"></div>
    </div>
  {{else}}
    <div class="mediaItem mediaFullMobileImageWrapper" defaultAction="link" href="/media/{{_id}}">
      <!--<img class="mediaFullMobileImage" src='{{url store="fullMobile"}}' title='{{metadata.name}}'>-->
        <div class="centeredImage" title='{{metadata.name}}' mediaFull='{{url store="mediaFull"}}' style="background-image: url('{{url store="fullMobile"}}')"></div>
    </div>
  {{/if}}
</template>

<template name="mm_media_control">
  {{>mmNextPage label='Media' class=class url=url snippet=snippet}}
</template>

<template name="mediaFullView">
  {{#contentFor "headerTitle"}}
      <h1 class="title" data-snap-ignore="true">Viewing Image</h1>
  {{/contentFor}}

  {{> contentFor region="headerButtonLeft" template='_userMediaBackHeaderButton'}}

  {{#ionView}}
    {{#ionContent}}
        <div class="viewMediaWrapper" data-snap-ignore="true">
            <img class="mediaViewImage" src='{{_mediaItem.url store="mediaFull"}}' title='{{_mediaItem.metadata.name}}'>
        </div>
    {{/ionContent}}
  {{/ionView}}
</template>


<template name="_presentMediaModal">
  {{#ionModal title="Media"}}
    {{#if _viewMediaInModal}}
      <div class="viewMediaInModal" style="transition:background-image 1s ease-in-out; background-image: url('{{_viewMediaInModal.url store="mediaFull"}}');"></div>
    {{/if}}
    <div class="mediaModalContentWrapper">
      {{#each _media}}
        {{> _modalMediaRow}}
      {{/each}}
    </div>

  {{/ionModal}}
</template>

<template name="_modalMediaRow">
    <div class="modalMediaItem" href="/media/{{_id}}">
        <!--<img class="mediaMobileImage" src='{{url store="thumbs"}}' title='{{metadata.name}}'>-->
        <div class="centeredImage" title='{{metadata.name}}' mediaFull='{{url store="mediaFull"}}' style="background-image: url('{{url store="fullMobile"}}')"></div>
    </div>
</template>
